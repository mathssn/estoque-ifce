{% extends 'base.html' %}

{% block content %}


<div class="container py-4">
  <div class="page-title mb-4">
    <h2 class="fw-bold border-bottom pb-2">
      <i class="bi bi-person-circle me-2"></i> Relatório mensal
    </h2>
  </div>
</div>


<div class="container py-4">

<div class="card mb-3">
    <div class="card-body">
      <form id="formData" action="{{ url_for('relatorios.relatorios_mensais') }}" class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
            <select name="mes" id="mes" class="form-control">
              {% for i, mes_ in meses.items() %}
                    {% if i == mes %}
                        <option value="{{ i }}" selected>{{ mes_ }}</option>
                    {% else %}
                        <option value="{{ i }}">{{ mes_ }}</option>
                    {% endif %}
              {% endfor %}
            </select>
            <input type="number" id="ano" name="ano" value="{{ ano }}" class="form-control">
            <button class="btn btn-primary" type="submit">Pesquisar</button>
      </form>
</div>
</div>
</div>
<div class="container mt-5">
    <div class="table-responsive">

        <table class="table table-striped table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th scope="col">Produto</th>
                <th scope="col">Unidade</th>
                <th scope="col">Café da manhã</th>
                <th scope="col">Lanche da manhã</th>
                <th scope="col">Almoço</th>
                <th scope="col">Lanche da tarde</th>
                <th scope="col">Jantar</th>
                <th scope="col">Ceia</th>
                <th scope="col">Outros</th>
                <th scope="col">Entrada</th>
            </tr>
        </thead>
        
        <tbody>

            {% for produto in produtos %}
                <tr>
                    <td scope="row">{{ produto.nome }}</td>
                    <td>{{ produto.unidade }}</td>
                    {% for destino in destinos %}
                    <td>{{ saidas_mensais[produto.id][destino.id] if saidas_mensais[produto.id][destino.id] > 0 else '' }}</td>
                    {% endfor %}
                    <td>{{ entradas_mensais[produto.id] if entradas_mensais[produto.id] > 0 else '' }}</td>
            </tr>
            {% else %}
                <p>Ainda não há produtos cadastrados</p>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>

{% endblock %}